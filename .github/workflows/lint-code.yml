name: Lint Code Base

on:
  workflow_call:
    inputs:
      files_to_lint:
        description: "Una cadena con los nombres de archivo separados por espacios para analizar"
        required: true
        type: string

jobs:
  lint-code-base:
    name: Lint Code Base
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4
        with:
          # Super-linter necesita el historial completo para comparar archivos.
          fetch-depth: 0

      - name: Create file filter regex
        run: |
          echo "LINT_REGEX=$(echo "${{ inputs.files_to_lint }}" | sed 's/ /|/g')" >> $GITHUB_ENV

      - name: Run Super-Linter
        uses: github/super-linter@v6
        env:
          # Se necesita el token para que el linter pueda reportar el estado.
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          # Filtra super-linter para que solo analice los archivos especificados.
          FILTER_REGEX_INCLUDE: ${{ env.LINT_REGEX }}
